@model IEnumerable<BookCart.Models.Book>
@{
    ViewData["Title"] = "Book List";
}

<!--shop  area start-->
<div class="shop_section shop_reverse">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-12">
                <!--sidebar widget start-->
                <aside class="sidebar_widget">
                    <div class="widget_inner">
                        <div class="widget_list widget_categories">
                            <h2>Categories</h2>
                            <ul>
                                @foreach (var item in ViewBag.Categories)
                                {
                                    <li><a href="~/fe/Home/Books?c=@item.Id">@item.Name</a></li>
                                }
                            </ul>
                        </div>
                        <div class="widget_list widget_filter">
                            <h2>Filter By</h2>
                            <div class="filter__list slider_range">
                                <h3>price</h3>
                                <form action="/fe/Home/Books">
                                    <div id="slider-range"></div>
                                    <span>Range:</span>
                                    <input type="text" name="priceRange" id="amount" />
                                    <h3>Authors</h3>
                                    <select name="author">
                                        @foreach (var item in ViewBag.Authors)
                                        {
                                            <option>@item</option>
                                        }
                                    </select>
                                    <div>
                                        <button type="submit">Search</button>
                                    </div>
                                </form>
                            </div>

                            <div class="filter__list widget_brands" style="padding-top: 100px;">
                                <h3 data-toggle="collapse" data-target="#brands">Authors</h3>
                                <ul class="widget_dropdown_categories collapse show" id="brands">
                                    <li><a href="#"> The North Face <span>104</span></a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="widget_list">
                            <h2>Recent Product</h2>
                            <div class="recent_product">
                                <div class="recent_product_list d-flex mb-25">
                                    <div class="recent_thumb">
                                        <a href="product-details.html"><img src="assets/img/product/product4.jpg" alt=""></a>
                                    </div>
                                    <div class="recent_content">
                                        <h4><a href="product-details.html">Barbour T-shirt <br> International</a></h4>
                                        <span>$32.00</span>
                                    </div>
                                </div>
                                <div class="recent_product_list d-flex">
                                    <div class="recent_thumb">
                                        <a href="product-details.html"><img src="assets/img/product/product6.jpg" alt=""></a>
                                    </div>
                                    <div class="recent_content">
                                        <h4><a href="product-details.html">Barbour T-shirt <br> International</a></h4>
                                        <span>$32.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </aside>
                <!--sidebar widget end-->
            </div>
            <div class="col-lg-9 col-md-12">
                <!--shop wrapper start-->
                <!--breadcrumbs area start-->
                <div class="breadcrumb_content">
                    <ul>
                        <li><a href="~/fe/home">Home</a></li>
                        <li>Book List</li>
                    </ul>
                </div>
                <!--breadcrumbs area end-->

                <div class="shop_banner d-flex align-items-center" data-bgimg="~/assets/img/bg/shop_bg.jpg">
                    <div class="shop_banner_text">
                        <h2>Books <br> Shop</h2>
                        <p>The collections books <br> essential for everybody</p>
                    </div>
                </div>
                <!--shop toolbar start-->
                <div class="shop_toolbar_wrapper d-flex justify-content-between align-items-center">
                    <div class="page_amount">
                        <p><span>101010</span> Books Found</p>
                    </div>
                    <div class=" sorting_by d-flex align-items-center">
                        <span>SORT BY :</span>
                        <form class="select_option" action="#">
                            <select name="orderby" id="short">

                                <option selected value="1">NAME       3</option>
                                <option value="2">NAME  4</option>
                                <option value="3">NAME  5</option>
                                <option value="4">NAME  6</option>
                                <option value="5">NAME  7</option>
                                <option value="6">NAME  8</option>
                            </select>
                        </form>
                    </div>
                    <div class="toolbar_btn_wrapper d-flex align-items-center">
                        <div class="view_btn">
                            <a class="view" href="#">VIEW</a>
                        </div>
                        <div class="shop_toolbar_btn">
                            <ul class="d-flex align-items-center">
                                <li><a href="#" class="active btn-grid-3" data-role="grid_3" data-tippy="3" data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="top"><i class="ion-grid"></i></a></li>

                                <li><a href="#" class="btn-list" data-role="grid_list" data-tippy="List" data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="top"><i class="ion-navicon"></i></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--shop toolbar end-->
                <div class="row shop_wrapper">
                    @foreach (var item in Model)
                    {
                        <div class="col-lg-4 col-md-4 col-sm-6 col-6 ">
                            <div class="single_product">
                                <div class="product_thumb">
                                    <a href="~/fe/Home/BookDetails/@item.Id">
                                        <img class="primary_img" src="/images/@item.Image" alt="@item.Title">
                                    </a>
                                    <div class="product_action">
                                        <ul>
                                            <li class="wishlist">
                                                <a href="#" data-tippy="Wishlist" data-tippy-inertia="true" data-tippy-delay="50"
                                                data-tippy-arrow="true" data-tippy-placement="left"><i class="icon-heart icons"></i></a>
                                            </li>

                                            <li class="quick_view">
                                                <a data-toggle="modal" 
                                                    data-target="#modal_box" 
                                                    data-tippy="Quick View" 
                                                    href="#" 
                                                    data-tippy-inertia="true" 
                                                    data-tippy-delay="50" 
                                                    data-tippy-arrow="true" 
                                                    data-tippy-placement="left"
                                                    data-id="@item.Id"
                                                    data-title="@item.Title"
                                                    data-image="@item.Image"
                                                    data-description="@item.Description"
                                                    data-price="@item.Price"
                                                    data-price-discount="@item.PriceDiscount">
                                                    <i class="icon-size-fullscreen icons"></i>
                                                </a>
                                            </li>
                                            <li class="compare">
                                                <a data-tippy="Compare" href="#" data-tippy-inertia="true" data-tippy-delay="50"
                                                data-tippy-arrow="true" data-tippy-placement="left"><i class="icon-refresh icons"></i></a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="product_label">
                                        <span>0%</span>
                                    </div>
                                </div>
                                <div class="product_content grid_content text-center">
                                    <div class="product_ratting">
                                        <ul class="d-flex justify-content-center">
                                            <li><a href="#"><i class="ion-android-star"></i></a></li>
                                            <li><a href="#"><i class="ion-android-star"></i></a></li>
                                            <li><a href="#"><i class="ion-android-star"></i></a></li>
                                            <li><a href="#"><i class="ion-android-star"></i></a></li>
                                            <li><a href="#"><i class="ion-android-star"></i></a></li>
                                            <li><span>(2)</span></li>
                                        </ul>
                                    </div>
                                    <h4 class="product_name"><a href="~/fe/Home/BookDetails/@item.Id">@item.Title</a></h4>
                                    <div class="price_box">
                                        @if (item.PriceDiscount != null)
                                        {
                                            <span class="current_price">@item.PriceDiscount.Value đ</span>
                                            <span class="old_price">@item.Price!.Value đ</span>
                                        }
                                        else
                                        {
                                            <span class="current_price">@item.Price!.Value đ</span>
                                        }
                                    </div>
                                    <div class="add_to_cart">
                                        <a class="btn btn-primary" href="/fe/home/addcart/@item.Id" data-tippy="Add To Cart" data-tippy-inertia="true" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="top">Add To Cart</a>
                                    </div>
                                </div>
                                <div class="product_list_content">
                                    <h4 class="product_name"><a href="~/fe/Home/BookDetails/@item.Id">@item.Title</a></h4>
                                    <p><a href="#">shows</a></p>
                                    @if (item.PriceDiscount != null)
                                    {
                                        <span class="current_price">@item.PriceDiscount.Value đ</span>
                                        <span class="old_price">@item.Price!.Value đ</span>
                                    }
                                    else
                                    {
                                        <span class="current_price">@item.Price!.Value đ</span>
                                    }
                                    <div class="product_desc">
                                        <p>@item.Description</p>
                                    </div>
                                    <div class="add_to_cart">
                                        <a class="btn btn-primary" href="/fe/home/addcart/@item.Id" 
                                        data-tippy="Add To Cart" data-tippy-inertia="true" 
                                        data-tippy-delay="50" data-tippy-arrow="true" data-tippy-placement="top">Add To Cart</a>

                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <div class="pagination_style pagination justify-content-center">
                    <ul class="d-flex">
                        <li><a href="#"> << </a></li>
                        <li><a href="#">1</a></li>
                        <li><a class="current" href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li><a href="#">>></a></li>
                    </ul>
                </div>

                <!--shop toolbar end-->
                <!--shop wrapper end-->
            </div>
        </div>
    </div>
</div>
<!--shop  area end-->
@section Scripts {
    <script>
        document.querySelector("#modal_box")
            .addEventListener("show.bs.modal", ({target: modal, relatedTarget: button}) => {
                const {
                    id,    
                    title, 
                    image,
                    description,
                    price,
                    priceDiscount
                } = button.dataset;
                console.log(id)
                // if (id != undefined) {
                //     modal.querySelector("#id").value = id;
                // }
                if (title != undefined) {
                    $("#modal_box .modal_title h2").val(title);
                }
                if (image != undefined) {
                    modal.querySelector("#modal_box .product_zoom_thumb img").src = "/images/"+image;
                }
                if (description != undefined) {
                    $("#modal_box .modal_description p").val(description);
                }
                if (price != undefined) {
                    modal.querySelector("#modal_box .modal_price .old_price").text = price;
                }
                if (priceDiscount != undefined) {
                    modal.querySelector("#modal_box .modal_price .new_price").text = priceDiscount;
                }
            });

        const min = @ViewBag.PriceMin
        const max = @ViewBag.PriceMax

        $( "#slider-range" ).slider({
            range: true,
            min: min,
            max: max,
            values: [ min, max ],
            slide: function( event, ui ) {
            $( "#amount" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] );
           }
        });
        $( "#amount" ).val($( "#slider-range" ).slider( "values", 0 ) +
           " - " + $( "#slider-range" ).slider( "values", 1 ) );
    </script>
}